# 📚 React 핵심 개념 정리(Compound Component Pattern)

---

# <mark> Compound Component Pattern </mark>
---
### [실습과정 정리](https://juncci.tistory.com/23)


## 정의
부모 컴포넌트가 공통 상태와 로직을 관리하고, 여러 자식 컴포넌트들이 이 상태를 React Context를 통해 공유하면서,
사용자가 자식 컴포넌트들을 선언적으로 조합하여 하나의 복잡한 UI를 유연하게 구성할 수 있게 해주는 패턴이다.

큰 컴포넌트를 작은 단위(Label, Field, Error 등)로 쪼개고,
이 하위 컴포넌트들을 원하는 순서·개수·구조로 조합할 수 있도록 설계된 방식이며,
일반적으로 React Context API + 정적 프로퍼티(static properties)를 활용하여 구현된다.

---

## **왜 Compound Component Pattern이 필요한가?**

UI가 점점 복잡해질수록 하나의 컴포넌트 안에
label, field, error, icon, helper 등 다양한 요소들이 들어간다.

전통적인 방식(props 기반)으로는 다음 문제가 생긴다.

* 다양한 UI 배치를 위해 props가 계속 늘어난다 (props 지옥)
* 배치 변경을 위해 부모 컴포넌트 코드를 계속 수정해야 한다
* 컴포넌트 구조가 고정되어 있어 확장성이 떨어진다
* 중첩된 UI 요소 간 상태 공유가 어려워진다
* 복잡한 로직이 단일 컴포넌트에 몰려 유지보수가 힘들어진다

**컴파운드 컴포넌트 패턴은 이러한 문제를 해결하면서도,
개발자에게 더 높은 조합(Composition) 자유도를 제공한다.**

> 복잡한 UI에서 "컴포넌트 내부 구조"는 유연하게,
> "상태 관리"는 단일한 부모에게 맡기는 방식이 필요하기 때문에 등장한 패턴이다.

---

# **장점 (Advantages)**

### **1) 높은 UI 배치 유연성**

개발자가 label, field, icon을 원하는 순서로 자유롭게 사용 가능.

```jsx
<Input>
  <Input.Field />
  <Input.Label />
</Input>
```

또는

```jsx
<Input>
  <Input.Label />
  <Input.Field />
  <Input.Error />
</Input>
```

### **2) props 증가 없이 확장성 확보**

UI 요구사항이 늘어나도 props를 추가할 필요 없이
하위 컴포넌트를 추가하는 방식으로 확장 가능.

### **3) 상태와 로직의 중심화 (Single Source of Truth)**

부모(Input/Tabs 등)에서 모든 상태를 관리해
자식들은 상태를 직접 가지지 않고, UI 표현에만 집중한다.

### **4) Context를 통한 자연스러운 상태 공유**

useContext로 value, activeTab 등 부모 상태를 쉽게 받아올 수 있다.

### **5) 파일 구조 및 역할 분리 명확**

* Input: 상태/로직 관리
* Input.Label: 텍스트 렌더링
* Input.Field: 입력 필드
* Input.Error: 에러 표시
  각 역할이 분리되어 유지보수성이 좋아진다.

### **6) HTML-like 구조 표현 가능**

마치 `<table>`, `<tr>`, `<td>`처럼 의미적 구조를 설계할 수 있다.

---

물론이지!
마지막 문장이 끊겼던 **단점(주의할 점)** 부분을 완성해서,
전체적으로 자연스럽게 읽히도록 다시 정리해줄게.

---

## **주의할 점 (단점 / Trade-Off)**

### **1) 단순한 컴포넌트에는 오히려 과한 구조**

Button, Badge, Tag처럼 구조가 단순한 컴포넌트는
굳이 컴파운드 패턴을 적용할 이유가 없다.

오히려 다음과 같은 불편함이 생길 수 있다:

* `<Button.Label />`, `<Button.Icon />` 같은 불필요한 조합이 생김
* props 한두 개로 해결할 일을 파일 여러 개로 쪼개야 함
* 컴포넌트 복잡도가 불필요하게 증가

**구조가 복잡한 UI(Input, Tabs, Select 등)에만 적합하다.**

---

### **2) Context 사용은 전체 자식 컴포넌트 재렌더링을 유발할 수 있음**

부모 상태가 바뀌면 useContext로 연결된 자식 컴포넌트도 함께 리렌더링된다.

* 성능에 민감한 UI에서는 주의 필요
* React.memo 등을 통해 최적화 가능

---

### **3) 팀 내 러닝 커브가 생길 수 있다**

정적 프로퍼티, Context, 조합 패턴을 잘 모르는 개발자에게는
처음에 익히기 어려울 수 있다.

* `<Input.Label>` 같은 문법이 생소할 수 있음
* 구조가 보이지 않기 때문에 문맥(Context)을 이해해야 함

---

### **4) 파일 수가 많아져 관리가 어려워질 수 있음**

Input 하나를 만들더라도:

* Input.js
* InputLabel.js
* InputField.js
* InputError.js
* InputIcon.js

이런 식으로 여러 파일로 나뉜다.

→ 컴포넌트 역할은 명확해지지만 폴더 관리가 중요해진다.

---

