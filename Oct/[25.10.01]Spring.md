
# 📚 Spring 핵심 개념 정리(Annotation, Bean, Ioc, DIP, DI)

---

## <mark>1. 어노테이션 (Annotation)</mark>

### 개념

* 코드에 메타데이터(metadata)를 붙이는 도구.
* 메타데이터란? "데이터를 설명하는 데이터". **Spring이 이 코드를 어떻게 처리해야 하는지 알려주는 힌트**.
* 예: `@Controller`를 붙인 클래스 → “이건 웹 요청을 처리하는 컨트롤러야”라고 스프링에게 알려주는 것.

### 오해 금지

* 어노테이션이 기능을 직접 만드는 게 아님.
* **Spring이 런타임에 어노테이션을 읽고 동작을 실행**하기 때문에 의미가 생김.

### 예시

```java
@Controller
public class UserController {
    @GetMapping("/hello")
    public String hello() {
        return "hello"; // hello.html 반환
    }
}
```

---

## <mark>2. Bean (빈)</mark>

### 개념

* **스프링 IoC 컨테이너가 관리하는 객체**.
* 우리가 직접 `new`로 만드는 객체와 달리, 컨테이너가 생성·관리하는 객체.

### 역할

* 객체의 **생성, 의존성 연결, 생명주기 관리**까지 모두 스프링이 담당.
* 우리가 “필요할 때 꺼내 쓰는” 느낌.

### 예시

```java
@Configuration
public class AppConfig {
    @Bean
    public MemberService memberService() {
        return new MemberService(memberRepository());
    }

    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }
}
```
→ `memberService`, `memberRepository`는 IoC 컨테이너 안에서 빈으로 관리됨.

---

## <mark>3. IoC (Inversion of Control, 제어의 역전)</mark>

### 개념

* 원래는 개발자가 객체를 `new`로 만들고, 의존 객체도 직접 넣어야 했음.
* **IoC**: 이 “제어권(객체 생성/관리)”을 스프링에게 위임.
* 객체가 스스로를 제어하지 않고 **외부 컨테이너가 제어**.

### 비유

* **직접 운전**: 내가 가속·브레이크 조작 = 객체가 직접 제어.
* **버스 타기**: 버스 기사(컨테이너)가 제어 → 나는 그냥 타서 이용 = IoC.

---

## <mark>4. DIP (Dependency Inversion Principle, 의존 역전 원칙)</mark>

### 개념

* 상위 모듈(비즈니스 로직)은 하위 모듈(구현체)에 의존하지 않는다.
* 대신, 추상화(인터페이스)에 의존해야 한다.
* 구현체가 바뀌어도 상위 모듈이 영향을 안 받게 하는 원칙.

### 잘못된 구조

```java
public class MemberService {
    private final MemoryMemberRepository repository = new MemoryMemberRepository(); 
    // 구현체에 직접 의존 → 변경 불가
}
```

### 올바른 구조 (DIP 적용)

```java
public class MemberService {
    private final MemberRepository repository; // 추상화 의존

    public MemberService(MemberRepository repository) {
        this.repository = repository;
    }
}
```
→ `MemoryMemberRepository`를 쓰다가, 나중에 `JdbcMemberRepository`로 갈아끼워도 `MemberService`는 변경 불필요.

---

## <mark>5. DI (Dependency Injection, 의존성 주입)</mark>

### 개념

* **의존성(Dependency)**: 어떤 객체가 다른 객체의 기능을 필요로 하는 관계.
  * 예: `MemberService` → `MemberRepository`에 의존.
* **주입(Injection)**: 그 필요한 객체를 **외부(스프링 컨테이너)가 넣어주는 행위**.

### 비유

* 내가 “자동차(서비스)”를 쓰려면 “엔진(레포지토리)”이 필요.
* IoC 컨테이너가 **적절한 엔진을 골라 끼워주는 것**이 DI.

---

### <mark>6. DI 방식</mark>

1. **생성자 주입** (권장)

```java
@Service
public class MemberService {
    private final MemberRepository memberRepository;

    @Autowired
    public MemberService(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}
```
* 장점: `final`로 불변 보장, 테스트 용이, 순환 참조 감지.

2. **Setter 주입**

```java
@Service
public class MemberService {
    private MemberRepository memberRepository;

    @Autowired
    public void setMemberRepository(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}
```
* 장점: 선택적 의존성 가능.
* 단점: 주입 누락 시 NPE 위험.

3. **필드 주입** (비추천)

```java
@Service
public class MemberService {
    @Autowired
    private MemberRepository memberRepository;
}
```
* 장점: 코드 짧음.
* 단점: 테스트 불편, 외부에서 주입 불가능.

---

# <mark>핵심 어노테이션 정리 (표)</mark>

| 구분      | 어노테이션             | 설명                                           |
| ------- | ----------------- | -------------------------------------------- |
| Bean 등록 | `@Component`      | 일반 클래스 빈 등록                                  |
|         | `@Service`        | 서비스 계층 빈 등록                                  |
|         | `@Repository`     | DAO/DB 계층 빈 등록, 예외 변환 지원                     |
|         | `@Controller`     | MVC 컨트롤러 등록                                  |
|         | `@RestController` | JSON 반환 컨트롤러 (`@Controller + @ResponseBody`) |
| Bean 정의 | `@Bean`           | 메서드 반환 객체를 빈으로 등록                            |
| DI 관련   | `@Autowired`      | 의존성 자동 주입                                    |
|         | `@Qualifier`      | 특정 빈 이름을 지정해 주입                              |
|         | `@Primary`        | 동일 타입 빈이 여러 개일 때 우선권 부여                      |
| 설정      | `@Configuration`  | 설정 클래스 지정                                    |
| 스캔      | `@ComponentScan`  | 지정 패키지 하위 컴포넌트 자동 스캔                         |
| 기타      | `@Scope`          | 빈 스코프 지정 (singleton/prototype 등)             |

---

## ✍️ 오늘의 회고

오늘은 비교적 이론 공부에 집중이 잘 되어 학습한 개념들이 머릿속에 자연스럽게 정리되는 느낌을 받았다. IoC, DI와 같은 핵심 개념을 이해하는 과정에서 평소보다 집중력이 높았던 덕분인지, 큰 어려움 없이 내용을 따라갈 수 있었다.

다만, 한편으로는 이론적인 이해와 실제 코드 구현 사이의 간극이 여전히 고민으로 남는다. 개념 자체는 이해가 되었지만, 이를 구체적으로 프로젝트 코드에 어떻게 녹여낼 수 있을지 그리고 어떤 상황에서 적절하게 적용할 수 있을지가 아직은 확신이 서지 않는다.

앞으로는 단순히 개념을 암기하는 데 그치지 않고, 작은 예제 코드부터 직접 작성해보며 "이론 → 실습 → 적용"의 흐름을 몸에 익히는 것이 필요하다고 느꼈다. 이렇게 해야 내가 배운 지식이 실제 개발 상황에서도 자연스럽게 활용될 수 있을 것이다.

---

## 📚 참고 자료  
- 유튜브 강의: [Spring 관련 강의 영상- [10분 테코톡] 오찌, 야호의 DI와 IoC](https://www.youtube.com/watch?v=8lp_nHicYd4)  
