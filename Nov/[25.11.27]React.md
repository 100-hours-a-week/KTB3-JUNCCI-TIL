# ğŸ“š React í•µì‹¬ ê°œë… ì •ë¦¬(useReducer, useEffect, useMemo)

---

# <mark> useReducer </mark>

- Reducer(ë¦¬ë“€ì„œ)ëŠ” ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§ì„ í•œ ê³³ì—ì„œ ê´€ë¦¬í•˜ëŠ” â€œìˆœìˆ˜ í•¨ìˆ˜â€ì…ë‹ˆë‹¤.

```
(action) â†’ reducer(state, action) â†’ newState
```

ìƒíƒœì˜ ë³€í™”ê°€ ë³µì¡í•˜ê±°ë‚˜ ë‹¤ì–‘í•œ ì•¡ì…˜ì´ ìˆì„ ë•Œ, ìƒíƒœ ì—…ë°ì´íŠ¸ íë¦„ì„

ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê³  ì¼ê´€ì„± ìˆê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

---

### ëª©ì 

**ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§ì„ í•œ ê³³ì— ëª¨ìœ¼ê¸° ìœ„í•´**

ì—¬ëŸ¬ `setState` í˜¸ì¶œ ëŒ€ì‹  í•˜ë‚˜ì˜ reducer í•¨ìˆ˜ì—ì„œ ìƒíƒœ ë³€ê²½ì„ ê´€ë¦¬.

1. **ìƒíƒœ ì „í™˜ íë¦„ì´ ëª…í™•í•´ì§**
    
    Switch ë¬¸ ë˜ëŠ” ê°ì²´ ë§¤í•‘ì„ í†µí•´ ì•¡ì…˜ì— ë”°ë¼ ë³€í™”ê°€ ë³´ì´ê¸° ë•Œë¬¸ì— ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›€.
    
2. **ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ì— ì í•©**
    
    ìƒíƒœê°€ ì¤‘ì²© ê°ì²´ì¼ ë•Œ, ì•¡ì…˜ì´ ì—¬ëŸ¬ ì¢…ë¥˜ì¼ ë•Œ ë§¤ìš° ìœ ìš©.
    
3. **í…ŒìŠ¤íŠ¸ ìš©ì´**
    
    ReducerëŠ” **ë™ì¼ ì…ë ¥ â†’ ë™ì¼ ì¶œë ¥**ì„ ë³´ì¥í•˜ëŠ” ìˆœìˆ˜ í•¨ìˆ˜.
    

---

### useReducer ê¸°ë³¸ êµ¬ì¡°

```jsx
const [state, dispatch] = useReducer(reducer, initialState);
```

- `state`: í˜„ì¬ ìƒíƒœ
- `dispatch(action)`: ì•¡ì…˜ ë³´ë‚´ê¸°
- `reducer(state, action)`: ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§
- `initialState`: ì´ˆê¸° ìƒíƒœ

---

### ê°„ë‹¨ ì˜ˆì œ: ì¹´ìš´í„° Reducer

```jsx
const initialState = { count: 0 };

function reducer(state, action) {
  switch (action.type) {
    case 'increment':
      return { count: state.count + 1 };
    case 'decrement':
      return { count: state.count - 1 };
    default:
      return state;
  }
}

```

---

### Context + useReducerë¡œ ê¸€ë¡œë²Œ ìƒíƒœ ê´€ë¦¬

### ëª©ì 

ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê³µìœ í•´ì•¼ í•˜ëŠ” ìƒíƒœë¥¼`Context API + useReducer` ì¡°í•©ìœ¼ë¡œ **ì „ì—­ ìƒíƒœì²˜ëŸ¼ ì‚¬ìš©**.

Flux íŒ¨í„´ì„ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•œ í˜•íƒœì´ë©° Reduxì˜ ë¯¸ë‹ˆ ë²„ì „ê³¼ë„ ìœ ì‚¬.

---

### ê¸€ë¡œë²Œ ìƒíƒœ ê´€ë¦¬ ì˜ˆì œ: Todo ì•± (Context + useReducer)

**1) ìƒíƒœì™€ reducer ë§Œë“¤ê¸° (todoReducer.js)**

```jsx
export const initialState = {
  todos: []
};

export function todoReducer(state, action) {
  switch (action.type) {
    case 'ADD_TODO':
      return {
        ...state,
        todos: [...state.todos, action.payload]
      };

    case 'REMOVE_TODO':
      return {
        ...state,
        todos: state.todos.filter(todo => todo.id !== action.payload)
      };

    default:
      return state;
  }
} 

```

---

**2) Context ìƒì„± ë° Provider êµ¬í˜„ (TodoContext.js)**

```jsx
import { createContext, useReducer } from 'react';
import { todoReducer, initialState } from './todoReducer';

export const TodoContext = createContext();

export function TodoProvider({ children }) {
  const [state, dispatch] = useReducer(todoReducer, initialState);

  return (
    <TodoContext.Provider value={{ state, dispatch }}>
      {children}
    </TodoContext.Provider>
  );
}

```

---

**3) App ì „ì²´ë¥¼ Providerë¡œ ê°ì‹¸ê¸° (App.js)**

```jsx
import { TodoProvider } from './TodoContext';
import TodoList from './TodoList';
import AddTodo from './AddTodo';

function App() {
  return (
    <TodoProvider>
      <AddTodo />
      <TodoList />
    </TodoProvider>
  );
}

export default App;

```

---

**4) Todo ì¶”ê°€ ì»´í¬ë„ŒíŠ¸ (AddTodo.js)**

```jsx
import { useContext, useState } from 'react';
import { TodoContext } from './TodoContext';

export default function AddTodo() {
  const { dispatch } = useContext(TodoContext);
  const [text, setText] = useState('');

  const addTodo = () => {
    dispatch({
      type: 'ADD_TODO',
      payload: { id: Date.now(), text }
    });
    setText('');
  };

  return (
    <>
      <input value={text} onChange={e => setText(e.target.value)} />
      <button onClick={addTodo}>ì¶”ê°€</button>
    </>
  );
}

```

---

**5) Todo ë¦¬ìŠ¤íŠ¸ í‘œì‹œ (TodoList.js)**

```jsx
import { useContext } from 'react';
import { TodoContext } from './TodoContext';

export default function TodoList() {
  const { state, dispatch } = useContext(TodoContext);

  return (
    <ul>
      {state.todos.map(todo => (
        <li key={todo.id}>
          {todo.text}
          <button onClick={() => dispatch({ type: 'REMOVE_TODO', payload: todo.id })}>
            ì‚­ì œ
          </button>
        </li>
      ))}
    </ul>
  );
}

```

---

# <mark> useEffect </mark>

`useEffect`ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ë¶€ìˆ˜íš¨ê³¼(side effect)ë¥¼ ì²˜ë¦¬í•˜ëŠ” Hookì…ë‹ˆë‹¤.

ë Œë”ë§ëœ ì´í›„ì— í™”ë©´ ê·¸ë¦¬ê¸° ì™¸ì— ì™¸ë¶€ì™€ ìƒí˜¸ ì‘ìš©ì„ í•˜ë©° side effectë¥¼ ì¼ìœ¼í‚´(ì²˜ë¦¬í•¨).

ë¶€ìˆ˜íš¨ê³¼ë€?

- í™”ë©´ ë Œë”ë§ ì™¸ì˜ ë™ì‘
- ì™¸ë¶€ ì„¸ê³„ì™€ ì†Œí†µí•˜ëŠ” ì‘ì—…
- Reactê°€ â€œì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ì‘ì—…â€ì´ë¼ê³  ë³´ëŠ” ê²ƒë“¤

ì˜ˆ:

API ìš”ì²­/ DOM ì¡°ì‘/ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡/ íƒ€ì´ë¨¸ ì„¤ì •/ Store-LocalStorage ì ‘ê·¼/ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ˆê¸°í™”

---

## ê¸°ë³¸ ë¬¸ë²•

```jsx
useEffect(() => {
  // ì‹¤í–‰í•  ì½”ë“œ
}, [dependency]);

```

- ì²« ë²ˆì§¸ ì¸ì: ì‹¤í–‰í•  í•¨ìˆ˜
- ë‘ ë²ˆì§¸ ì¸ì: ì˜ì¡´ì„± ë°°ì—´(dependencies)

---

## ë™ì‘ ë°©ì‹

`useEffect`ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ **ë Œë”ë§ í›„ì— ì‹¤í–‰**ë©ë‹ˆë‹¤.

ì˜ì¡´ì„± ë°°ì—´ì— ë”°ë¼ ì‹¤í–‰ íƒ€ì´ë°ì´ ë‹¬ë¼ì§.

---

## ì˜ì¡´ì„± ë°°ì—´ì— ë”°ë¥¸ ì‹¤í–‰ ìœ í˜•

### ì˜ì¡´ì„± ë°°ì—´ ì—†ìŒ â†’ ë§¤ ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰

```jsx
useEffect(() => {
  console.log("ë§¤ ë Œë”ë§ ì‹¤í–‰");
});

```

---

### ë¹ˆ ë°°ì—´ [] â†’ ìµœì´ˆ 1ë²ˆë§Œ ì‹¤í–‰ (mount ì‹œ)

```jsx
useEffect(() => {
  console.log("ì²˜ìŒ 1ë²ˆë§Œ ì‹¤í–‰");

  // cleanupì€ ì–¸ë§ˆìš´íŠ¸ ì‹œ
}, []);

```

ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:

- í™”ë©´ ì²« ë¡œë”© ì‹œ API í˜¸ì¶œ
- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ˆê¸°í™”
- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡

---

### íŠ¹ì • state ë˜ëŠ” propsê°€ ë³€ê²½ë  ë•Œ ì‹¤í–‰

```jsx
useEffect(() => {
  console.log("valueê°€ ë°”ë€” ë•Œ ì‹¤í–‰");
}, [value]);

```

ì˜ˆ:

- ê²€ìƒ‰ì–´ ë³€ê²½ ì‹œ API ì¬í˜¸ì¶œ
- propsê°€ ë°”ë€Œë©´ ì• ë‹ˆë©”ì´ì…˜ ì¬ì‹œì‘

---

### **cleanup(ì •ë¦¬) í•¨ìˆ˜**

useEffect ì•ˆì—ì„œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ëŠ” cleanupì´ë©°, ë‹¤ìŒ ì‹œì ì— ì‹¤í–‰ë¨

- ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ
- ì˜ì¡´ì„± ë³€ê²½ìœ¼ë¡œ effectê°€ ì¬ì‹¤í–‰ë˜ê¸° **ì§ì „**

```jsx
useEffect(() => {
  const timer = setInterval(() => {
    console.log("íƒ€ì´ë¨¸ ì‹¤í–‰");
  }, 1000);

  return () => {
    clearInterval(timer);  // cleanup
  };
}, []);

```

cleanupì´ í•„ìš”í•œ ê²½ìš°:

- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
- íƒ€ì´ë¨¸ í•´ì œ
- WebSocket ì¢…ë£Œ
- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ dispose

---

## useEffectì˜ ëŒ€í‘œì ì¸ ì‚¬ìš© ì˜ˆì œ

### API í˜¸ì¶œ

```jsx
useEffect(() => {
  fetch('/api/data').then(res => res.json()).then(setData);
}, []);

```

---

### ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡

```jsx
useEffect(() => {
  const handleResize = () => console.log(window.innerWidth);

  window.addEventListener('resize', handleResize);

  return () => window.removeEventListener('resize', handleResize);
}, []);

```

---

### props ë³€í™” ê°ì§€

```jsx
useEffect(() => {
  console.log("props ë³€í™” ê°ì§€");
}, [props.value]);

```

---

### ìƒíƒœ ë³€ê²½ ì‹œ íŠ¹ì • ì‘ì—…

```jsx
useEffect(() => {
  localStorage.setItem("count", count);
}, [count]);

```

---

## useEffect ì‚¬ìš© ì‹œ í”í•œ ì‹¤ìˆ˜ & ì£¼ì˜ì‚¬í•­

### 1) ì˜ì¡´ì„± ë°°ì—´ì„ ì˜ëª» ì„¤ì •í•¨

ì˜¬ë°”ë¥¸ deps ë¯¸í¬í•¨ â†’ ì‹¤í–‰ ì•ˆ ë˜ê±°ë‚˜ ë„ˆë¬´ ìì£¼ ì‹¤í–‰ë¨.

React DevToolsê°€ ê²½ê³ í•˜ëŠ” ì´ìœ .

---

### 2) ë¶ˆí•„ìš”í•œ effect ì‚¬ìš©

ë‹¨ìˆœ ì—°ì‚°ì´ë‚˜ state ì—…ë°ì´íŠ¸ëŠ” effect ì—†ì´ë„ ê°€ëŠ¥.

```jsx
// âŒ ë¶ˆí•„ìš”
useEffect(() => {
  setTotal(a + b);
}, [a, b]);

// â­• ìƒíƒœê°€ ë Œë”ë§ ì¤‘ ê³„ì‚° ê°€ëŠ¥í•˜ë©´ êµ³ì´ useEffect í•„ìš” ì—†ìŒ
const total = a + b;

```

---

### 3) ë¹„ë™ê¸° í•¨ìˆ˜ ì§ì ‘ ì „ë‹¬

```jsx
// âŒ ì˜ëª»ëœ ì˜ˆ
useEffect(async () => {
  const res = await fetch(...);
}, []);

```

â†’ async ì‚¬ìš© ë¶ˆê°€, cleanupê³¼ ì¶©ëŒ ê°€ëŠ¥.

```jsx
// â­• ì˜¬ë°”ë¥¸ ì˜ˆ
useEffect(() => {
  async function loadData() {
    const res = await fetch(...);
  }
  loadData();
}, []);

```

---

### 4) setStateë¥¼ ë¬´ì¡°ê±´ effect ì•ˆì— ë„£ìŒ â†’ ë¬´í•œ ë Œë”ë§ ìœ„í—˜

---

### â€œë Œë”ë§ í›„ì— ê¼­ í•„ìš”í•œ ì‘ì—…â€ì—ë§Œ ì‚¬ìš©í•˜ê¸°

useEffectëŠ” **ë¶€ìˆ˜íš¨ê³¼(side effect)** ì „ìš©ì…ë‹ˆë‹¤.

âœ” ì™¸ë¶€ ì„¸ê³„ì™€ ìƒí˜¸ì‘ìš©í•  ë•Œë§Œ ì‚¬ìš©

- API ìš”ì²­
- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
- íƒ€ì´ë¨¸
- DOM ìˆ˜ë™ ì¡°ì‘
- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ˆê¸°í™”

íŒŒìƒ ìƒíƒœ ê³„ì‚°, ë‹¨ìˆœ ê°’ ë³€ê²½ ë“±ì€ effectë¡œ í•˜ë©´ ë¹„íš¨ìœ¨ì 

ğŸ‘‡ ì˜ˆ: ì˜ëª»ëœ ì½”ë“œ

```jsx
// âŒ ë¶ˆí•„ìš”í•œ useEffect
useEffect(() => {
  setTotal(a + b);
}, [a, b]);

```

ğŸ‘‡ ì˜¬ë°”ë¥¸ ì½”ë“œ

```jsx
// â­• ë Œë”ë§ ì¤‘ ê³„ì‚°ìœ¼ë¡œ í•´ê²° ê°€ëŠ¥
const total = a + b;

```

> ê·œì¹™: â€œë Œë”ë§ ì¤‘ì— ê°€ëŠ¥í•œ ì¼ì€ useEffectë¥¼ ì“°ì§€ ë§ì.â€
> 

---

### ì˜ì¡´ì„± ë°°ì—´(deps)ì„ ìµœì†Œí™”í•˜ê³ , ì •í™•í•˜ê²Œ ë„£ê¸°

### âŒ depsë¥¼ ì˜ëª» ì“°ë©´

- ì‹¤í–‰ì´ ë„ˆë¬´ ìì£¼ ì¼ì–´ë‚˜ê³ 
- ì„±ëŠ¥ì´ ë–¨ì–´ì§€ê±°ë‚˜
- ë¬´í•œ ë Œë”ë§ ë°œìƒ
    
    â†’ â€œReact ì–´ë µë‹¤â€ëŠ” ë§ ëŒ€ë¶€ë¶„ì´ ì—¬ê¸°ì„œ ë‚˜ì˜´
    

### depsì—ëŠ” â€œeffect ì•ˆì—ì„œ ì‚¬ìš©í•˜ëŠ” ì™¸ë¶€ ê°’â€ë§Œ í¬í•¨

ğŸ‘‡ ì˜ëª»ëœ ì½”ë“œ

```jsx
useEffect(() => {
  fetchUser(userId);
}, []); // âŒ userIdê°€ ë°”ë€Œì–´ë„ ì‹¤í–‰ ì•ˆ ë¨

```

ğŸ‘‡ ì˜¬ë°”ë¥¸ ì½”ë“œ

```jsx
useEffect(() => {
  fetchUser(userId);
}, [userId]); // â­• userId ë°”ë€Œë©´ ì¬í˜¸ì¶œ

```

---

### ë¹„ë™ê¸° ì‘ì—…ì€ â€œeffect ë‚´ë¶€ì—ì„œ async ì„ ì–¸ í›„ í˜¸ì¶œâ€

ì ˆëŒ€ ì´ë ‡ê²Œ ì“°ì§€ ë§ˆì„¸ìš”:

```jsx
useEffect(async () => { ... }, []);

```

ì˜¬ë°”ë¥¸ ë°©ì‹:

```jsx
useEffect(() => {
  async function load() {
    const res = await fetch("/api");
    setData(await res.json());
  }
  load();
}, []);

```

---

### cleanupì„ ë°˜ë“œì‹œ ê´€ë¦¬í•˜ê¸°

ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ, íƒ€ì´ë¨¸, WebSocket, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë“±ì€

**cleanupì´ ì—†ìœ¼ë©´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜** ë°œìƒ.

```jsx
useEffect(() => {
  const handle = () => console.log("scroll");
  window.addEventListener("scroll", handle);

  return () => window.removeEventListener("scroll", handle);
}, []);

```

> ğŸ’¡ â€œaddEventListenerì™€ removeEventListenerëŠ” í•œ ì„¸íŠ¸â€
> 

---

### stale closure(ì˜¤ë˜ëœ ë°ì´í„° ì°¸ì¡°) ë°©ì§€

ë¹„ë™ê¸° ì½œë°±ì´ ì˜¤ë˜ëœ stateë¥¼ ì°¸ì¡°í•˜ëŠ” ë¬¸ì œ.

ì˜ˆ) ì˜ëª»ëœ ì˜ˆì‹œ

```jsx
useEffect(() => {
  setTimeout(() => {
    console.log(count); // âŒ ì˜¤ë˜ëœ count
  }, 1000);
}, []);

```

í•´ê²°: í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ or ref ì‚¬ìš©

```jsx
setCount(prev => prev + 1);

```

ë˜ëŠ”

```jsx
const countRef = useRef();
useEffect(() => { countRef.current = count }, [count]);

```

---

### useEffectë¥¼ â€œë¶„ë¦¬â€í•´ì„œ ë¡œì§ì„ ëª…í™•í•˜ê²Œ ë§Œë“¤ê¸°

í•˜ë‚˜ì˜ effect ì•ˆì—ì„œ ëª¨ë“  ì¼ì„ ì²˜ë¦¬í•˜ë©´ ë³µì¡í•´ì§ â†’ ìœ ì§€ë³´ìˆ˜ â†“

ğŸ‘‡ ë‚˜ìœ ì˜ˆ

```jsx
useEffect(() => {
  fetchData();
  saveToStorage();
  registerEvent();
}, []);

```

ğŸ‘‡ ì¢‹ì€ ì˜ˆ (íš¨ìœ¨ì ì´ê³  ëª…í™•)

```jsx
useEffect(fetchData, []);
useEffect(saveToStorage, [value]);
useEffect(registerEvent, []);

```

ì‘ê²Œ ë‚˜ëˆ„ë©´:

- depsë„ ê°„ë‹¨í•´ì§€ê³ 
- ë²„ê·¸ë„ ì¤„ê³ 
- ìœ ì§€ë³´ìˆ˜ë„ ì‰¬ì›€

---

# <mark> useMemo </mark>

`useMemo`ëŠ” **ë¹„ì‹¼ ê³„ì‚°ì„ ë©”ëª¨ì´ì œì´ì…˜(Memoization)í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì¬ê³„ì‚°ì„ í”¼í•˜ëŠ” Hook**ì…ë‹ˆë‹¤.

> â€œë Œë”ë§í•  ë•Œë§ˆë‹¤ ë§¤ë²ˆ ê³„ì‚°í•  í•„ìš” ì—†ëŠ” ê°’â€ì„
> 
> 
> â€œìºì‹±í•´ì„œ í•„ìš”í•  ë•Œë§Œ ë‹¤ì‹œ ê³„ì‚°â€í•˜ë„ë¡ í•´ì£¼ëŠ” ë„êµ¬.
> 

---

## ê¸°ë³¸ ë¬¸ë²•

```jsx
const memoizedValue = useMemo(() => compute(a, b), [a, b]);

```

- ì²« ë²ˆì§¸ ì¸ì: ê³„ì‚°í•  í•¨ìˆ˜
- ë‘ ë²ˆì§¸ ì¸ì: ì˜ì¡´ì„± ë°°ì—´
- memoizedValue: ì˜ì¡´ì„±ì´ ë°”ë€” ë•Œë§Œ ë‹¤ì‹œ ê³„ì‚°ë˜ëŠ” ê°’

---

## ì–¸ì œ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?

**ê³„ì‚° ë¹„ìš©ì´ í° ì—°ì‚°ì¼ ë•Œ**

ì˜ˆ:

- ë³µì¡í•œ ë¦¬ìŠ¤íŠ¸ í•„í„°ë§
- í° ë°°ì—´ ì •ë ¬
- ë¬´ê±°ìš´ ìˆ˜í•™ ê³„ì‚°
- ê°ì²´ ë³€í™˜ ì‘ì—…

**ë Œë”ë§ ë•Œë§ˆë‹¤ ì¬ê³„ì‚°í•˜ë©´ ì„±ëŠ¥ ì €í•˜ê°€ ë°œìƒí•  ë•Œ**

**í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— propsë¡œ ë„˜ê¸°ëŠ” ê°ì²´ê°€ ë§¤ë²ˆ ìƒˆë¡œ ìƒì„±ë˜ì–´ ë¦¬ë Œë”ë§ì„ ìœ ë°œí•  ë•Œ**

---

### ì–¸ì œ ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ëŠ”ê°€?

ëŒ€ë¶€ë¶„ì˜ ê²½ìš° useMemoëŠ” í•„ìš” ì—†ë‹¤.

React íŒ€ë„ ì´ë ‡ê²Œ ë§í•¨

> useMemoëŠ” ì„±ëŠ¥ ë¬¸ì œê°€ ì‹¤ì œë¡œ ë‚˜íƒ€ë‚  ë•Œë§Œ ì‚¬ìš©í•˜ë¼.
> 

ì•„ë˜ ê°™ì€ ê²½ìš°ëŠ” useMemoê°€ ì˜¤íˆë ¤ ì—­íš¨ê³¼:

- ê³„ì‚° ë¹„ìš©ì´ ê°€ë²¼ìš´ ê²½ìš°
- depsê°€ ìì£¼ ë°”ë€ŒëŠ” ê²½ìš°
- ì½”ë“œ ì½ê¸°ë§Œ ë” ì–´ë µê²Œ ë§Œë“œëŠ” ê²½ìš°

---

## ì˜ˆì œ 1: ë¬´ê±°ìš´ ê³„ì‚° ìµœì í™”

ğŸ‘‡ useMemo ì—†ì´ ë§¤ ë Œë”ë§ë§ˆë‹¤ ê³„ì‚°ë¨

```jsx
const expensiveValue = slowFunction(count);

```

ğŸ‘‡ useMemoë¡œ ìµœì í™”

```jsx
const expensiveValue = useMemo(() => slowFunction(count), [count]);

```

---

## ì˜ˆì œ 2: ë¦¬ìŠ¤íŠ¸ í•„í„°ë§ / ì •ë ¬ ìµœì í™”

```jsx
const filteredList = useMemo(() => {
  return list.filter(item => item.active);
}, [list]);

```

listê°€ ë³€ê²½ë  ë•Œë§Œ í•„í„°ë§ ì¬ì‹¤í–‰.

---

## ì˜ˆì œ 3: ê°ì²´/ë°°ì—´ì„ propsë¡œ ë„˜ê¸¸ ë•Œ ë¦¬ë Œë”ë§ ë°©ì§€

ReactëŠ” **ê°ì²´/ë°°ì—´ì€ ì°¸ì¡°ê°€ ë‹¬ë¼ì§€ë©´ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì¸ì‹**í•©ë‹ˆë‹¤.

ğŸ‘‡ ì´ ê²½ìš° Parentê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ objê°€ ìƒˆë¡œ ìƒì„±ë¨ â†’ Child ë¶ˆí•„ìš” ë¦¬ë Œë”ë§

```jsx
<Child config={{ darkMode: true }} />

```

ğŸ‘‡ useMemoë¡œ ì°¸ì¡° ìœ ì§€

```jsx
const config = useMemo(() => ({ darkMode: true }), []);

<Child config={config} />;

```

**í•„ìš”í•  ë•Œ:**

- React.memo ì‚¬ìš© ì‹œ
- propsë¡œ ê°ì²´/ë°°ì—´/í•¨ìˆ˜ë¥¼ ë„˜ê¸¸ ë•Œ
- ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ë°©ì§€í•˜ê³  ì‹¶ì„ ë•Œ

---

## useMemoì™€ useCallbackì˜ ê´€ê³„

| useMemo | useCallback |
| --- | --- |
| ê°’(value)ì„ ë©”ëª¨ì´ì œì´ì…˜ | í•¨ìˆ˜(function)ë¥¼ ë©”ëª¨ì´ì œì´ì…˜ |
| ì—°ì‚° ê²°ê³¼ë¥¼ ìºì‹± | í•¨ìˆ˜ referenceë¥¼ ìºì‹± |
| ë¬´ê±°ìš´ ê³„ì‚° ìµœì í™” | í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ë°©ì§€ |

ë‘ ê°œëŠ” ì—­í• ì´ ë‹¤ë¥´ì§€ë§Œ ëª©ì ì€ ê°™ìŒ:

**ë¶ˆí•„ìš”í•œ ë Œë”ë§/ê³„ì‚° ì¤„ì´ê¸°**

---

### stale closure ìœ„í—˜ì€ ì—†ëŠ”ê°€?

useMemoëŠ” ë‚´ë¶€ì—ì„œ stateë¥¼ ì½ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ

depsê°€ ì •í™•í•˜ì§€ ì•Šìœ¼ë©´ stale ê°’ ì‚¬ìš© ìœ„í—˜ ìˆìŒ.

ğŸ‘‡ ë¬¸ì œ ì½”ë“œ

```jsx
const value = useMemo(() => count * 2, []); // âŒ stale value

```

ğŸ‘‡ ì˜¬ë°”ë¥¸ ì½”ë“œ

```jsx
const value = useMemo(() => count * 2, [count]);

```

---


