# 📚 JS 핵심 개념 정리(fetch())

---
# <mark> 프로토타입(Prototype) </mark>

---

## 1️⃣ `fetch()`란?

> **`fetch()`는 자바스크립트 내장 비동기 함수로,
> HTTP 요청을 보내고 서버의 응답(Response)을 받아오는 역할을 합니다.**

---

### 기본 문법

```jsx
fetch(url, options)
```

| 매개변수      | 설명                               |
| --------- | -------------------------------- |
| `url`     | 요청을 보낼 주소(API 엔드포인트 등)           |
| `options` | (선택) HTTP 메서드, 헤더, 바디 등을 설정하는 객체 |

---

### 반환값 (Promise)

`fetch()`는 호출 즉시 **Promise 객체를 반환**합니다.

결과는 나중에 `.then()` 또는 `await`에서 받습니다.

---

## 2️⃣ Promise(프로미스)란?

> 비동기 연산의 상태를 관리하는 객체

`fetch()`가 반환하는 Promise는 아래 3가지 상태를 가집니다.

| 상태          | 의미                |
| ----------- | ----------------- |
| `pending`   | 대기 중              |
| `fulfilled` | 성공 → `then()` 실행  |
| `rejected`  | 실패 → `catch()` 실행 |

---

## 3️⃣ 코드 분석

```jsx
function getUserData() {
  fetch('https://api.example.com/user') // ① 요청 보내기
    .then(res => res.json())            // ② 응답 JSON 파싱
    .then(data => console.log(data));   // ③ 데이터 출력
}
```

### 동작 흐름

1. **서버에 GET 요청 → Promise 반환**
2. 요청 성공 시 `res.json()` 실행 (응답 본문 파싱)
3. 파싱된 JSON 데이터를 다음 `.then()`에서 받음

---

## 4️⃣ 비동기 실행 순서 예시

```jsx
console.log("1. 요청 시작");

fetch('https://api.example.com/user')
  .then(res => res.json())
  .then(data => console.log("3. 응답 완료", data));

console.log("2. 코드 계속 실행");
```

### 실제 출력 순서

```
1. 요청 시작
2. 코드 계속 실행
3. 응답 완료 {name: "Kim", age: 30}
```

➡️ **`fetch()`는 비동기적으로 동작**하기 때문에
요청을 보내도 코드 실행 흐름이 멈추지 않습니다.

---

## 5️⃣ fetch() 옵션 사용 예시

```jsx
fetch('https://api.example.com/user', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ name: 'Kim', age: 30 })
})
  .then(res => res.json())
  .then(data => console.log('응답:', data))
  .catch(err => console.error('에러 발생:', err));
```

| 옵션         | 설명                                          |
| ---------- | ------------------------------------------- |
| `method`   | HTTP 메서드 (`GET`, `POST`, `PUT`, `DELETE` 등) |
| `headers`  | 요청 헤더 설정                                    |
| `body`     | 서버로 보낼 데이터(문자열 형태)                          |
| `.catch()` | 에러 처리                                       |

---

## 6️⃣ then() 체인의 의미

```jsx
fetch(url)
  .then(① 성공 콜백)
  .catch(② 실패 콜백)
  .finally(③ 항상 실행);
```

### 특징

* `then()`은 **새로운 Promise**를 반환 → 체이닝 가능
* `catch()`는 요청 또는 `then()` 내부 오류도 잡음
* `finally()`는 성공/실패 상관없이 마지막에 실행

---

## 7️⃣ async/await 문법

더 읽기 좋은 비동기 문법.

```jsx
async function getUserData() {
  try {
    const res = await fetch('https://api.example.com/user');
    const data = await res.json();
    console.log(data);
  } catch (error) {
    console.error("에러 발생:", error);
  }
}
```

| 구문            | 형태                            | 특징        |
| ------------- | ----------------------------- | --------- |
| `then()`      | `fetch().then(...).then(...)` | 전통적인 방식   |
| `async/await` | `await fetch()`               | 읽기 쉽고 직관적 |

---

## 8️⃣ 정리 요약

| 항목               | 설명                          |
| ---------------- | --------------------------- |
| **`fetch()`**    | HTTP 요청을 보내는 비동기 함수         |
| **반환값**          | `Promise<Response>`         |
| **`then()`**     | Promise 성공 결과 처리            |
| **`res.json()`** | 응답 본문을 JSON 객체로 파싱          |
| **비동기 흐름**       | 요청 → 응답 대기 → 데이터 처리         |
| **에러 처리**        | `.catch()` 또는 `try...catch` |

---

