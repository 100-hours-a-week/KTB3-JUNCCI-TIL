# ğŸ“š JS í•µì‹¬ ê°œë… ì •ë¦¬(this, binding)

---

# <mark> this/ binding </mark>

## 1. `this`ë€?

> â€œëˆ„ê°€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí–ˆëŠ”ê°€â€ì— ë”°ë¼ ìë™ìœ¼ë¡œ ê²°ì •ë˜ëŠ” ê°ì²´ ì°¸ì¡°.
> 

ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ `this`ëŠ” **ì •ì˜ ì‹œì ì´ ì•„ë‹ˆë¼ í˜¸ì¶œ ì‹œì **ì— ê²°ì •ë©ë‹ˆë‹¤.

í•¨ìˆ˜ê°€ ì–´ë””ì„œ ì •ì˜ëëŠ”ì§€ê°€ ì•„ë‹ˆë¼ **ì–´ë–»ê²Œ ë¶ˆë ¸ëŠ”ì§€**ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.

---

## 2. ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë³„ `this`

### â‘  ì „ì—­ ë²”ìœ„ (Global Scope)

```jsx
console.log(this);
```

- **ë¸Œë¼ìš°ì €**: `window`
- **Node.js**: `{}` (ëª¨ë“ˆ ìŠ¤ì½”í”„)

> ì „ì—­ì—ì„œ thisëŠ” ë¸Œë¼ìš°ì €ì—ì„œëŠ” window/ Nodeì—ì„œëŠ” ë¹ˆ ê°ì²´ë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.
> 

---

### â‘¡ ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ

```jsx
function showThis() {
  console.log(this);
}
showThis(); // window (ë¸Œë¼ìš°ì €), undefined (strict)

```

- **ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ** ì‹œ, í˜¸ì¶œ ì£¼ì²´ê°€ ì—†ê¸° ë•Œë¬¸ì—
    
    â†’ **ê¸°ë³¸ ë°”ì¸ë”©(default binding)** ê·œì¹™ ì ìš©
    
- `use strict` ëª¨ë“œì—ì„œëŠ” `undefined`

---

### â‘¢ ê°ì²´ì˜ ë©”ì„œë“œ í˜¸ì¶œ

```jsx
const user = {
  name: "Alice",
  sayHi() {
    console.log(this.name);
  },
};
user.sayHi(); // "Alice"

```

- **ì•”ì‹œì  ë°”ì¸ë”©(implicit binding)** ê·œì¹™ ì ìš©
    
    â†’ `this`ëŠ” **ì (.) ì•ì˜ ê°ì²´** (`user`)ë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.
    

> ë©”ì„œë“œë¥¼ ë³€ìˆ˜ì— í• ë‹¹í•˜ë©´ ë°”ì¸ë”©ì´ ëŠê²¨ ì „ì—­ìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
> 

---

### â‘£ ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ (`new` ë°”ì¸ë”©)

```jsx
function Person(name) {
  this.name = name;
}
const p = new Person("Bob");
console.log(p.name); // "Bob"

```

- `new`ë¡œ í˜¸ì¶œ ì‹œ:
    1. ìƒˆ ê°ì²´ `{}` ìƒì„±
    2. `this`ê°€ ê·¸ ê°ì²´ë¥¼ ê°€ë¦¬í‚´
    3. ìƒì„±ì ì‹¤í–‰ í›„ ìƒˆ ê°ì²´ ë°˜í™˜

---

### â‘¤ í™”ì‚´í‘œ í•¨ìˆ˜ì˜ `this`

```jsx
const user = {
  name: "Alice",
  sayHi: () => console.log(this.name),
};
user.sayHi(); // undefined

```

- í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” **ìì‹ ì˜ `this`ë¥¼ ê°€ì§€ì§€ ì•ŠìŒ**
    
    â†’ **ìƒìœ„ ìŠ¤ì½”í”„ì˜ this(ë ‰ì‹œì»¬ this)** ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©
    
     â†’â€œì •ì˜ëœ ìœ„ì¹˜ì˜ thisâ€ ë¡œ ê³ ì •ë©ë‹ˆë‹¤.
    

> ê°ì²´ ë©”ì„œë“œì—ì„œëŠ” function í‚¤ì›Œë“œë¥¼ ì¨ì•¼ í•¨!
> 

---

## 3. `this` ë°”ì¸ë”©ì˜ 4ê°€ì§€ ê·œì¹™

| ìš°ì„ ìˆœìœ„ | ê·œì¹™ | ì„¤ëª… | ì˜ˆì‹œ |
| --- | --- | --- | --- |
| 1 | **new ë°”ì¸ë”©** | `new`ë¡œ ìƒì„±ëœ ê°ì²´ì— this ê³ ì • | `new Person()` |
| 2 | **ëª…ì‹œì  ë°”ì¸ë”©** | `call`, `apply`, `bind`ë¡œ ì§€ì • | `fn.call(obj)` |
| 3 | **ì•”ì‹œì  ë°”ì¸ë”©** | ê°ì²´ ë©”ì„œë“œë¡œ í˜¸ì¶œë  ë•Œ | `obj.fn()` |
| 4 | **ê¸°ë³¸ ë°”ì¸ë”©** | ë‚˜ë¨¸ì§€ ê²½ìš°, ì „ì—­ ë˜ëŠ” undefined | `fn()` |

---

### ğŸ“Œ ëª…ì‹œì  ë°”ì¸ë”©

```jsx
function greet() {
  console.log(`Hi, ${this.name}`);
}
const user = { name: "Tom" };

greet.call(user);  // Hi, Tom
greet.apply(user); // Hi, Tom
const hi = greet.bind(user);
hi();              // Hi, Tom

```

| ë©”ì„œë“œ | íŠ¹ì§• |
| --- | --- |
| `call(thisArg, ...args)` | ì¦‰ì‹œ ì‹¤í–‰, ì¸ìë¥¼ ê°œë³„ ì „ë‹¬ |
| `apply(thisArg, [args])` | ì¦‰ì‹œ ì‹¤í–‰, ì¸ìë¥¼ ë°°ì—´ë¡œ ì „ë‹¬ |
| `bind(thisArg)` | ìƒˆë¡œ ê³ ì •ëœ í•¨ìˆ˜ ë°˜í™˜ (ì§€ì—° ì‹¤í–‰) |

---

## ğŸ“Œ new ë°”ì¸ë”© (ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ)

```jsx
function Person(name) {
  this.name = name;
  console.log(this); // Person { name: 'Tom' }
}

const p1 = new Person("Tom"); // newë¡œ í˜¸ì¶œ
console.log(p1.name); // Tom

```

- `new`ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´
    1. ìƒˆë¡œìš´ ë¹ˆ ê°ì²´ `{}`ê°€ ë§Œë“¤ì–´ì§€ê³ 
    2. ê·¸ ê°ì²´ê°€ í•¨ìˆ˜ ë‚´ë¶€ì˜ `this`ë¡œ ë°”ì¸ë”©ë¨
    3. ëª…ì‹œì ìœ¼ë¡œ ë‹¤ë¥¸ ê°ì²´ë¥¼ ë¦¬í„´í•˜ì§€ ì•Šìœ¼ë©´ `this`(ì¦‰, ìƒˆ ê°ì²´)ê°€ ë°˜í™˜ë¨

---

## ğŸ“Œ ì•”ì‹œì  ë°”ì¸ë”© (ê°ì²´ì˜ ë©”ì„œë“œë¡œ í˜¸ì¶œ)

```jsx
const user = {
  name: "Jane",
  sayHi() {
    console.log(`Hi, ${this.name}`);
  },
};

user.sayHi(); // Hi, Jane

```

- `.`(ì ) ì™¼ìª½ì— ìˆëŠ” ê°ì²´ê°€ `this`ë¡œ ë°”ì¸ë”©ë¨
- `user.sayHi()`ì˜ `this`ëŠ” `user`

> í•¨ìˆ˜ë¥¼ ë³€ìˆ˜ì— ë”°ë¡œ í• ë‹¹í•˜ë©´ ë°”ì¸ë”©ì´ ì‚¬ë¼ì§
> 
> 
> ```jsx
> const hi = user.sayHi;
> hi(); // Hi, undefined (ê¸°ë³¸ ë°”ì¸ë”©ìœ¼ë¡œ ë°”ë€œ)
> ```
> 

---

## ğŸ“Œ ê¸°ë³¸ ë°”ì¸ë”©

```jsx
function showThis() {
  console.log(this);
}

showThis(); // ë¸Œë¼ìš°ì €: window / Node.js: global (ë˜ëŠ” undefined in strict mode)

```

- ì—„ê²© ëª¨ë“œ(`'use strict'`)ì—ì„œëŠ” `undefined`
- **ë¹„ì—„ê²© ëª¨ë“œ**ì—ì„œëŠ” ì „ì—­ ê°ì²´(`window` ë˜ëŠ” `global`)

> ì–´ë–¤ ê°ì²´ì—ë„ ì†í•˜ì§€ ì•Šì€ ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œì€ thisê°€ ì „ì—­(ë˜ëŠ” undefined)
> 

---

## 4. ì½œë°±ê³¼ this

### thisê°€ ì‚¬ë¼ì§€ëŠ” ê²½ìš°

```jsx
const counter = {
  count: 0,
  addLater() {
    setTimeout(function() {
      console.log(this.count);
    }, 1000);
  },
};
counter.addLater(); // undefined

```

- `setTimeout`ì˜ ì½œë°±ì€ ë¸Œë¼ìš°ì €ê°€ í˜¸ì¶œ â†’ **thisê°€ ì „ì—­(window)** ìœ¼ë¡œ ë°”ë€œ

---

### í•´ê²° 1: `bind`

```jsx
setTimeout(function() {
  console.log(this.count);
}.bind(this), 1000);

```

### í•´ê²° 2: í™”ì‚´í‘œ í•¨ìˆ˜

```jsx
setTimeout(() => {
  console.log(this.count);
}, 1000);

```

> í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„(addLaterì˜ this)ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
> 

---

## 5. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œì˜ this

```html
<button id="btn">Click</button>
<script>
document.querySelector("#btn").addEventListener("click", function() {
  console.log(this); // <button>
});
</script>

```

- ì¼ë°˜ í•¨ìˆ˜ í•¸ë“¤ëŸ¬ì˜ `this` â†’ ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ DOM ìš”ì†Œ

```jsx
document.querySelector("#btn").addEventListener("click", () => {
  console.log(this); // window
});

```

- í™”ì‚´í‘œ í•¨ìˆ˜ í•¸ë“¤ëŸ¬ì˜ `this` â†’ ìƒìœ„ ìŠ¤ì½”í”„(ì „ì—­)

> ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ì¼ë°˜ í•¨ìˆ˜ë¡œ ì •ì˜í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.
> 

---

## 6. í´ë˜ìŠ¤ì™€ this

```jsx
class User {
  constructor(name) {
    this.name = name;
  }
  sayHi() {
    console.log(this.name);
  }
}
const user = new User("Alice");
user.sayHi(); // "Alice"

```

- í´ë˜ìŠ¤ ë©”ì„œë“œì˜ `this` â†’ **ì¸ìŠ¤í„´ìŠ¤**
- **ë©”ì„œë“œë¥¼ ì½œë°±ìœ¼ë¡œ ì „ë‹¬**í•˜ë©´ `this`ë¥¼ ìƒìŠµë‹ˆë‹¤.

```jsx
setTimeout(user.sayHi, 1000); // undefined

```

í•´ê²°:

```jsx
setTimeout(user.sayHi.bind(user), 1000);
setTimeout(() => user.sayHi(), 1000);

```

---

## 7. í´ë˜ìŠ¤ í•„ë“œì™€ í™”ì‚´í‘œ í•¨ìˆ˜

í´ë˜ìŠ¤ í•„ë“œ ë¬¸ë²•ì„ ì´ìš©í•˜ë©´ **ìë™ìœ¼ë¡œ thisê°€ ê³ ì •**ë©ë‹ˆë‹¤.

```jsx
class Counter {
  count = 0;
  increase = () => {
    console.log(this.count);
  };
}
const c = new Counter();
setTimeout(c.increase, 1000); // 0

```

> í´ë˜ìŠ¤ í•„ë“œì˜ í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„(this)ë¥¼ ê³ ì •í•˜ê¸° ë•Œë¬¸ì— ë°”ì¸ë”© ë¬¸ì œ í•´ê²°ì— ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.
> 

---
