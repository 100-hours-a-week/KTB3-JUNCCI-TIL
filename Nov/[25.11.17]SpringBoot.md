# 📚 Spring Boot 핵심 개념 정리(Spring & Spring Boot 개념)

---

# **<mark>Spring & Spring Boot</mark>** 

---

## 1-1. Spring의 등장과 철학

EJB(EJB2, EJB3) 시절, Java 개발은 매우 무거웠습니다.

* 복잡한 XML 설정
* WAS 설정 필수
* 반복적인 DAO/서비스 코드
* 테스트 어려움

이 고통을 끝내기 위해 만든 프레임워크가 **Spring**입니다.

Spring의 가장 중요한 목표는 단 하나:

> **“개발자가 비즈니스 로직에만 집중할 수 있게 한다.”**

그 핵심 개념이 **IoC / DI / AOP** 입니다.

---

## 1-2. IoC / DI 심화

### IoC(Inversion of Control)

제어의 역전.
객체의 생성과 생명주기를 **개발자가 아닌 Spring이 관리**합니다.

```java
@PostMapping("/posts")
public String create(PostService service) {
    return service.save();
}
```

위 코드에서도 service를 new 하지 않죠?
이게 바로 **IoC**의 결과입니다.

---

## DI(Dependency Injection)

객체를 외부에서 주입받는 방식.

### DI의 세 가지 방법

* 생성자 주입(권장)
* 필드 주입
* Setter 주입

Spring은 DI를 통해 객체 간 결합도를 낮추고 테스트를 쉽게 만들어줍니다.

---

## 1-3. Bean 스코프 & 싱글톤과 무상태 설계

Spring Bean의 기본 스코프는 **Singleton**입니다.

왜?

* 요청 1개마다 객체를 생성하면 CPU/메모리 폭발
* 대규모 트래픽에서 절대 불가능

### 싱글톤 Bean의 원칙

> **싱글톤 Bean은 상태를 가지면 안 된다.**

잘못된 예:

```java
@Service
public class OrderService {
    private int price; // 공유되는 상태 → 동시성 문제 발생
}
```

올바른 설계:

* 메서드 파라미터로 데이터 전달
* 지역 변수만 사용
* stateless하게 유지

---

## 1-4. AOP 핵심 개념

AOP는 “횡단 관심사(Cross-cutting Concern)”를 분리하는 기술입니다.

| 기능      | 어플리케이션 어디서 필요?   |
| ------- | ---------------- |
| 로깅      | 모든 요청, 특정 메서드 전후 |
| 트랜잭션 관리 | DB 변경하는 모든 서비스   |
| 보안 체크   | 역할/권한 확인         |

### AOP가 없으면?

컨트롤러/서비스 곳곳에 중복 코드 잔뜩…

### AOP가 있으면?

로직과 보안/트랜잭션/로깅이 깔끔하게 분리됨.

---

## 1-5. Spring MVC 전체 흐름

아래는 Spring MVC의 전체 요청 흐름:

```
[Browser]
   ↓
[DispatcherServlet]
   ↓
[HandlerMapping] —— 어떤 컨트롤러로 갈까?
   ↓
[HandlerAdapter] —— 실제 호출 실행
   ↓
[Controller]
   ↓
[ViewResolver]
   ↓
[View Template (Thymeleaf, JSP)]
```

DispatcherServlet은 Spring Web의 **정중앙**에서 모든 웹 요청을 관리합니다.

---

## 1-6. Spring Boot 자동 설정 원리

Spring Boot가 인기 있는 이유 = **압도적인 편의성**

대표 기능

* 내장 톰캣
* 자동 설정(Auto Configuration)
* starter 의존성 관리

Starter 예:

```
spring-boot-starter-web
spring-boot-starter-data-jpa
spring-boot-starter-security
```

### Auto Configuration 동작 방식

1. classpath에 특정 라이브러리 존재 감지
2. 그에 맞는 설정 클래스(@Configuration)을 자동 적용
3. 개발자는 최소 설정만 작성하면 됨

예: H2, MySQL, JPA, Redis 자동 설정

이로써 Spring보다 **수십~수백 배 빠르게 초반 개발 환경을 구축할 수 있다.**

---
